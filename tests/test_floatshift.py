import pytest
from wallets.wallets_utils import shift_10, balance_string


SHIFT10_TEST_DATA = [
    ["0.0157", 6, 15700],
    ["0.0157000000000", 6, 15700],
    [".0157", 6, 15700],
    ["00.0157", 6, 15700],
    ["0000.0157", 6, 15700],
    ["0.0157", 18, 15700000000000000],
    ["0.0157000000000", 18, 15700000000000000],
    [".0157", 18, 15700000000000000],
    ["00.0157", 18, 15700000000000000],
    ["0000.0157", 18, 15700000000000000],
    ["40.0", 18, 40000000000000000000],
    ["40", 18, 40000000000000000000],
    ["29.788964552418198747", 18, 29788964552418198747],
    ["1984654729.788964552418198747", 18, 1984654729788964552418198747],
    ["71591984654729.788964552418198747", 18, 71591984654729788964552418198747],
    ["157", 2, 15700],
    ["10", 0, 10],
    ["2", 0, 2],
    ["0", 0, 0],
    ["0", 8, 0],
    ["0.0", 0, 0],
    ["0.0", 8, 0],
    ["2000", 0, 2000],
    ["2000", 6, 2000000000],
    ["2000.673456342", 9, 2000673456342],
    ["2000.673456", 6, 2000673456],
    ["2000.673456123", 6, 2000673456],
    ["2000.673456342", 4, 20006734],
    ["0.000000126", 10, 1260],
    ["0.00000000000000126", 18, 1260],
]


@pytest.mark.parametrize("data_test", SHIFT10_TEST_DATA)
def test_shift10(data_test):
    assert shift_10(data_test[0], data_test[1]) == data_test[2]


BAL10_TEST_DATA = [
    ["0.0157", 6, 15700],
    ["0.0157", 18, 15700000000000000],
    ["40", 18, 40000000000000000000],
    ["157", 0, 157],
    ["157", 2, 15700],
    ["10", 0, 10],
    ["2", 0, 2],
    ["0", 0, 0],
    ["0", 6, 0],
    ["0", 8, 0],
    ["0", 18, 0],
    ["2000", 0, 2000],
    ["2000", 6, 2000000000],
    ["2", 18, 2000000000000000000],
    ["2000", 18, 2000000000000000000000],
    ["2000.67345653128237", 18, 2000673456531282370000],
    ["2000.673456531282371237", 18, 2000673456531282371237],
    ["2000.67345653128", 15, 2000673456531280000],
    ["2000.673456531281237", 15, 2000673456531281237],
    ["2000.673456531457", 12, 2000673456531457],
    ["2000.67345653", 12, 2000673456530000],
    ["2000.67345653", 8, 200067345653],
    ["2000.673456", 6, 2000673456],
    ["2000.6734", 4, 20006734],
    ["2000.67", 2, 200067],
    ["0.000000126", 10, 1260],
    ["0.00000000000000126", 18, 1260],
    ["0.00000000000076126", 18, 761260],
    ["0.000000000000000001", 18, 1],
    ["0.297889645524181", 18, 297889645524181000],
    ["0.297889645524181123", 18, 297889645524181123],
    ["0.029788964552418112", 18, 29788964552418112],
    ["0.000037198237523994", 18, 37198237523994],
    ["0.00001791911535771", 18, 17919115357710],
    ["0.000058", 18, 58000000000000],
    ["0.000000027818154", 18, 27818154000],
    ["40", 18, 40000000000000000000],
    ["29.788964552418198747", 18, 29788964552418198747],
    ["1984654729.788964552418198747", 18, 1984654729788964552418198747],
    ["771591984654729.788964552418198747", 18, 771591984654729788964552418198747],
]


@pytest.mark.parametrize("datab_test", BAL10_TEST_DATA)
def test_balstr(datab_test):
    assert balance_string(datab_test[2], datab_test[1]) == datab_test[0]
